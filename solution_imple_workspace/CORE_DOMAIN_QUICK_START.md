# 核心领域模型知识图谱 - 快速开始

> **版本**: 1.0.0  
> **更新日期**: 2026-01-16

---

## 一、新功能概览

### 1.1 增强的图谱节点显示 ✅

**改进前**:
- 节点只显示标题（title/project_name）
- 缺少关键属性信息
- 需要点击才能查看详情

**改进后**:
- 节点直接显示关键属性
- 根据实体类型智能显示（优先级、状态、进度、负责人等）
- 最多显示2个关键属性，避免节点过大

**示例**:
```
原节点显示：
  ┌─────────────────┐
  │  高速车道保持功能  │
  └─────────────────┘

新节点显示：
  ┌─────────────────┐
  │  高速车道保持功能  │
  │  优先级: P0      │
  │  状态: implementing│
  └─────────────────┘
```

### 1.2 完整的核心领域模型数据 ✅

**数据规模**:
- **22种实体类型**: 涵盖7大领域
- **69个节点**: 真实的MX-2026车型项目数据
- **74条关系边**: 完整的追溯链
- **10层追溯**: 从Epic到Deployment

**7大领域**:
1. 车型项目域（VehicleProject、LifecycleNode、Baseline）
2. 领域项目域（DomainProject、PIPlanning、Sprint）⭐ 新增
3. 需求管理域（Epic、FR、SSTS、MR）
4. 迭代执行域（Task、DailyStandup、SprintReview）
5. DevOps交付域（Repository、Commit、Build、Artifact、Deployment）
6. 产品资产域（ProductLine、Product、FeatureAsset、ModuleAsset）
7. 协调管理域（TeamBacklog、Dependency）

---

## 二、快速开始

### 2.1 启动系统

**步骤1: 启动后端**
```bash
cd backend
npm install  # 首次运行
npm start
```
后端服务启动在: `http://localhost:3001`

**步骤2: 启动前端**
```bash
cd frontend
npm install  # 首次运行
npm start
```
前端界面打开在: `http://localhost:3000`

### 2.2 加载核心领域模型数据

**方法1: 通过前端界面（推荐）✨**

1. 打开浏览器访问 `http://localhost:3000`
2. 点击顶部 **"导入数据"** 按钮
3. **默认会显示"JSON文件"选项卡**
4. 点击 **"选择JSON文件"** 按钮
5. 选择文件: `data/core-domain-data.json`
6. 系统会显示文件信息：
   ```
   ✓ 文件已加载: core-domain-data.json
   包含 69 个节点, 74 条边
   ```
7. 点击 **"导入"** 按钮
8. 等待加载完成，系统会提示：
   ```
   导入成功: 69个节点, 74条边
   ```
9. 图谱自动渲染展示

**方法2: 通过API（高级）**

```bash
# 1. 加载schema定义
curl -X POST http://localhost:3001/api/v1/graph/schema \
  -H "Content-Type: application/json" \
  -d @data/core-domain-schema.json

# 2. 加载图谱数据
curl -X POST http://localhost:3001/api/v1/import/json \
  -H "Content-Type: application/json" \
  -d @data/core-domain-data.json
```

### 2.3 查看图谱效果

加载完成后，你会看到：

```
页面布局：
┌──────────────────────────────────────────────────────┐
│  [导入数据] [图谱视图] [表格视图]               [搜索]│
├──────────────────────────────────────────────────────┤
│                                                      │
│          ┌─────────────────┐                        │
│          │ VehicleProject  │                        │
│          │  MX-2026车型     │                        │
│          │  状态: InProgress│                        │
│          └────────┬────────┘                        │
│                   │                                  │
│          ┌────────┴────────┐                        │
│          │                 │                         │
│   ┌──────▼──────┐  ┌──────▼──────┐                 │
│   │DomainProject│  │DomainProject│                 │
│   │  智能驾驶    │  │  智能座舱    │                 │
│   │  进度: 45%   │  │  进度: 38%   │                 │
│   └──────┬──────┘  └──────┬──────┘                 │
│          │                 │                         │
│   ┌──────▼──────┐  ┌──────▼──────┐                 │
│   │ PIPlanning  │  │ PIPlanning  │                 │
│   │  2026-Q1    │  │  2026-Q1    │                 │
│   │  进度: 68%   │  │  进度: 55%   │                 │
│   └─────────────┘  └─────────────┘                 │
│          ...                                         │
│                                                      │
└──────────────────────────────────────────────────────┘
```

---

## 三、支持的导入格式

### 3.1 JSON文件（推荐）⭐

**格式要求**：
```json
{
  "version": "1.0.0",
  "name": "知识图谱名称",
  "nodes": [
    {
      "id": "node-id",
      "type": "EntityType",
      "data": {
        "属性1": "值1",
        "属性2": "值2"
      }
    }
  ],
  "edges": [
    {
      "id": "edge-id",
      "source": "source-node-id",
      "target": "target-node-id",
      "type": "relation_type",
      "data": {
        "属性": "值"
      }
    }
  ]
}
```

**优势**：
- ✅ 支持完整的图谱数据（节点+边）
- ✅ 支持复杂的属性结构
- ✅ 易于版本控制
- ✅ 可以包含元数据

**示例文件**：
- `data/core-domain-data.json` - 核心领域模型数据（69节点，74边）
- `data/sample-data.json` - 智能驾驶样本数据

### 3.2 Markdown表格

**格式要求**：
```markdown
| 实体A (ID) | 关系 (谓语) | 实体B (ID) | 置信度 | 来源系统 | 更新时间 |
|------------|-------------|------------|--------|----------|----------|
| PROJ_001   | 管理        | SSTS_1001  | 1.0    | 玄武平台  | 2026-01-15 |
```

**优势**：
- ✅ 适合简单的三元组数据
- ✅ 易于手工编辑
- ✅ 可以复制粘贴

**示例文件**：
- `data/sample-triples.md` - 三元组样本数据

### 3.3 Excel文件

**格式要求**：
- 第一行必须是表头
- 列顺序: 实体A | 关系 | 实体B | 置信度 | 来源系统 | 更新时间

**优势**：
- ✅ 适合批量编辑
- ✅ 支持Excel函数处理
- ✅ 易于导入导出

---

## 四、核心功能使用

### 4.1 节点详情查看

**操作**: 点击任意节点

**效果**: 右侧弹出详情面板，显示：
- 实体类型和ID
- 所有属性详情
- 追溯查询选项

**示例**:
```
点击节点: fr-001-lane-keeping

显示详情:
┌─────────────────────────────────┐
│ 特性需求 - fr-001-lane-keeping   │
├─────────────────────────────────┤
│ 标题: 高速车道保持功能            │
│ Epic ID: epic-highway-driving   │
│ 领域: 智能驾驶                   │
│ 领域项目: dp-mx-2026-adas        │
│ 描述类型: prd                    │
│ 优先级: P0                       │
│ 状态: implementing               │
│ 负责人: FO-李四                  │
├─────────────────────────────────┤
│ [需求追溯]                       │
│ 查询类型: [完整追溯 ▼]           │
│ 追溯深度: [3 ▲▼]                │
│ [执行追溯查询] 按钮              │
└─────────────────────────────────┘
```

### 4.2 追溯查询

**3种追溯类型**:

#### 1) 完整追溯（Full Trace）
从当前节点追溯所有上下游关系

**使用场景**: 查看需求的完整生命周期

**示例**: 
```
查询: fr-001-lane-keeping
深度: 5

结果: 
Epic → FR → SSTS → MR → Task → Commit → Build → Artifact
     ↓
  DomainProject → PIPlanning → Sprint
     ↓
  Baseline → LifecycleNode → VehicleProject
```

#### 2) 影响分析（Impact Analysis）
追溯上游，查看当前变更会影响哪些需求

**使用场景**: 评估某个模块/任务变更的影响范围

**示例**:
```
查询: mr-001-lane-detection
深度: 3

结果:
mr-001-lane-detection
  ← ssts-001-straight-lane
    ← fr-001-lane-keeping
      ← epic-highway-driving
```

#### 3) 下游任务（Downstream Tasks）
追溯下游，查看需求的实现任务和交付状态

**使用场景**: 查看需求的落地情况

**示例**:
```
查询: epic-highway-driving
深度: 5

结果:
epic-highway-driving
  → fr-001-lane-keeping
    → ssts-001-straight-lane
      → mr-001-lane-detection
        → task-001-lanenet-impl (in_progress)
        → task-002-image-preprocess (done)
```

### 4.3 表格视图

**操作**: 点击顶部 **"表格视图"** 按钮

**功能**:
- 以表格形式查看所有节点
- 按实体类型分组
- 支持排序和筛选
- 导出为CSV/Excel

**示例**:
```
┌─────────────────────────────────────────────────┐
│ 实体类型: FeatureRequirement                     │
├────────┬──────────────────┬──────┬──────────────┤
│ ID     │ 标题              │优先级│ 状态          │
├────────┼──────────────────┼──────┼──────────────┤
│ fr-001 │ 高速车道保持功能   │ P0   │ implementing │
│ fr-002 │ 自动变道功能      │ P0   │ implementing │
│ fr-003 │ 自适应巡航功能    │ P0   │ implementing │
│ fr-004 │ 垂直泊车功能      │ P0   │ implementing │
│ fr-005 │ NOA HMI交互界面   │ P0   │ implementing │
│ fr-006 │ 自然语音控制      │ P1   │ reviewing    │
└────────┴──────────────────┴──────┴──────────────┘
```

---

## 五、典型使用场景

### 5.1 场景1: 需求全生命周期追溯

**目标**: 追溯一个用户需求从Epic到最终部署的完整过程

**步骤**:
1. 在图谱中找到Epic节点: `epic-highway-driving`
2. 点击节点，打开详情面板
3. 选择追溯类型: **"完整追溯"**
4. 设置追溯深度: **10**
5. 点击 **"执行追溯查询"**

**结果**: 系统展示从Epic到Deployment的完整10层追溯链

**应用价值**: 
- 需求透明化
- 快速定位问题
- 评估需求完成度

---

### 5.2 场景2: 变更影响分析

**目标**: 某个模块需求要变更，评估对上游需求的影响

**步骤**:
1. 找到模块需求节点: `mr-001-lane-detection`
2. 点击节点
3. 选择追溯类型: **"影响分析"**
4. 设置追溯深度: **5**
5. 点击 **"执行追溯查询"**

**结果**: 系统展示所有依赖该模块的上游需求

**应用价值**:
- 变更风险评估
- 通知相关干系人
- 制定变更计划

---

### 5.3 场景3: 领域项目进度监控

**目标**: 查看智驾领域项目的整体进度和任务分布

**步骤**:
1. 找到领域项目节点: `dp-mx-2026-adas`
2. 点击节点查看详情
   - 进度: 45%
   - 状态: InProgress
3. 选择 **"下游任务"** 追溯
4. 查看所有关联的PI、Sprint、Task

**结果**: 
- 可视化展示项目结构
- 查看所有Sprint和任务状态
- 识别瓶颈和风险

**应用价值**:
- 项目进度透明化
- 快速识别风险
- 优化资源分配

---

### 5.4 场景4: 基线功能清单查看

**目标**: 查看ET节点基线包含哪些功能

**步骤**:
1. 找到基线节点: `baseline-mx-et-001`
2. 点击节点
3. 选择 **"影响分析"** 查看哪些FR在该基线中
4. 或选择 **"完整追溯"** 查看FR的实现状态

**结果**: 
- 显示所有在ET基线中的FR
- 查看每个FR的实现进度
- 评估基线完成度

**应用价值**:
- 基线管理
- 风险识别
- 发布准备

---

## 六、进阶功能

### 6.1 自定义图谱布局

**操作**: 在图谱视图中，可以：
- **拖拽节点**: 调整节点位置
- **滚轮缩放**: 放大/缩小图谱
- **双击节点**: 居中显示
- **Ctrl+拖拽**: 平移画布

### 6.2 筛选显示

**功能**: 只显示特定类型的实体

**操作**:
1. 点击右侧 **"筛选"** 按钮
2. 选择要显示的实体类型
   - [ ] Epic
   - [x] FeatureRequirement
   - [x] SSTS
   - [x] ModuleRequirement
   - [ ] Task
3. 点击 **"应用"**

**结果**: 图谱只显示选中的实体类型及其关系

### 6.3 导出图谱

**功能**: 将图谱导出为图片或数据

**操作**:
1. 点击顶部 **"导出"** 按钮
2. 选择导出格式:
   - PNG图片
   - SVG矢量图
   - JSON数据
   - CSV表格
3. 点击 **"下载"**

---

## 七、常见问题

### Q1: 图谱节点太多，显示混乱怎么办？

**A**: 
- 使用筛选功能，只显示关注的实体类型
- 使用追溯查询，聚焦特定的追溯链
- 使用搜索功能，定位特定节点
- 调整图谱布局参数（见设置）

### Q2: 如何添加自己的数据？

**A**: 
1. 参考 `data/core-domain-data.json` 的格式
2. 按照schema定义添加新的节点和边
3. 确保所有关系的source和target节点ID存在
4. 通过前端界面导入新数据

### Q3: 追溯查询太慢怎么办？

**A**:
- 减少追溯深度（建议≤5）
- 优化后端查询性能（添加索引）
- 使用缓存机制
- 考虑分批加载大量数据

### Q4: 如何查看某个Sprint的所有任务？

**A**:
1. 找到Sprint节点（如：`spt-2026-q1-2`）
2. 点击节点
3. 选择 **"影响分析"**，深度设为2
4. 系统会展示该Sprint的所有任务

### Q5: 节点属性不显示怎么办？

**A**: 
- 确认数据中节点的data字段包含所需属性
- 检查GraphView.js中的formatNodeLabel函数
- 确认实体类型匹配（大小写敏感）
- 查看浏览器控制台是否有错误

---

## 八、下一步

### 8.1 扩展数据

- 添加更多车型项目
- 添加更多领域项目（底盘、车身、动力）
- 添加测试数据（TestCase、Defect）
- 添加团队数据（Team、TeamMember）

### 8.2 功能增强

- 实时数据更新
- 多人协作编辑
- 权限管理
- 变更历史追踪
- 智能推荐

### 8.3 集成外部系统

- Jira集成（需求管理）
- GitLab集成（代码管理）
- Jenkins集成（CI/CD）
- TestRail集成（测试管理）

---

## 九、技术支持

**文档**:
- [核心领域模型详细说明](./data/core-domain-README.md)
- [API文档](./docs/API.md)
- [架构文档](./docs/ARCHITECTURE.md)

**联系方式**:
- 技术支持: support@example.com
- 问题反馈: issues@example.com

---

**创建日期**: 2026-01-16  
**维护者**: 自动化研发平台团队  
**版本**: 1.0.0
