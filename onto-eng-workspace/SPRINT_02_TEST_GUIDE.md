# Sprint 02 测试指南

**版本**: v1.0  
**测试日期**: 2026-01-17  
**Sprint**: Sprint 02 - 性能优化与交互增强  
**状态**: ✅ 准备就绪

---

## 🚀 快速开始

### 1. 重启服务（重要！）
```bash
# 停止服务
./stop.sh

# 清理前端缓存
cd frontend
rm -rf node_modules/.cache build

# 返回根目录
cd ..

# 重新启动
./start.sh
```

**等待时间**: 30-60秒（前端编译）

### 2. 访问地址
```
前端: http://localhost:8080
后端: http://localhost:8090
```

---

## 🧪 测试清单

### ✅ 测试1: 仪表盘修复验证

#### 目标
确认Pie图表label表达式错误已修复。

#### 测试步骤
1. 访问 http://localhost:8080
2. 等待数据加载完成
3. 点击顶部 "📊 仪表盘" 按钮
4. 打开浏览器Console（F12）

#### 验证点
- [ ] Console无 "Unexpected character: }" 错误
- [ ] 饼图正常显示
- [ ] 饼图标签显示格式: "关系类型名: XX.X%"
- [ ] 鼠标悬停显示tooltip

#### 预期结果
```
✅ 无任何JavaScript错误
✅ 饼图渲染完整
✅ 标签格式正确
✅ 交互流畅
```

#### 问题排查
如果仍有错误：
```bash
# 强制清理缓存
cd frontend
rm -rf node_modules/.cache build
npm start
```

---

### ✅ 测试2: 矩阵视图性能优化

#### 目标
验证矩阵视图性能大幅提升，支持大规模数据。

#### 测试步骤
1. 点击顶部 "🔥 矩阵" 按钮
2. 观察加载时间（打开DevTools > Network）
3. 尝试不同的功能

#### 2.1 分页功能测试

**操作**:
1. 观察矩阵视图顶部标签（显示节点数）
2. 滚动到底部，查看分页器
3. 尝试切换页码
4. 尝试切换页大小（25/50/100/200）

**验证点**:
- [ ] 顶部显示总节点数（如：75 个节点）
- [ ] 分页器显示正确页码
- [ ] 切换页码时矩阵更新
- [ ] 切换页大小后矩阵重新渲染
- [ ] 每次切换加载时间 < 500ms

---

#### 2.2 排序功能测试

**操作**:
1. 找到顶部右侧的"排序"下拉框
2. 尝试各种排序选项

**验证点**:
- [ ] 度数降序：核心节点在前
- [ ] 出度降序：出边多的节点在前
- [ ] 入度降序：入边多的节点在前
- [ ] ID升序：按字母顺序
- [ ] 类型分组：同类型节点聚集

**预期效果**:
矩阵行列的节点顺序随排序方式改变。

---

#### 2.3 性能基准测试

**操作**:
1. 打开DevTools > Performance
2. 点击Record
3. 切换一次排序方式
4. 停止Record，查看火焰图

**验证点**:
- [ ] 渲染时间 < 500ms
- [ ] 帧率 > 30fps
- [ ] 无长时间阻塞

**性能目标**:
| 节点数 | 目标加载时间 | 实际时间 |
|--------|--------------|----------|
| 25 | <200ms | _________ |
| 50 | <300ms | _________ |
| 75 | <500ms | _________ |
| 100 | <1s | _________ |

---

### ✅ 测试3: 单元格点击详情

#### 目标
验证点击热力图单元格可以查看详细关系信息。

#### 测试步骤
1. 在矩阵视图中找到有颜色的单元格（表示有关系）
2. 点击该单元格
3. 观察弹出的Modal

#### 验证点
- [ ] Modal成功弹出
- [ ] 显示源节点信息（蓝色Tag）
- [ ] 显示目标节点信息（绿色Tag）
- [ ] 显示关系数量（红色Tag）
- [ ] 显示关系列表
- [ ] 每条关系显示类型（紫色Tag）
- [ ] 每条关系显示属性（如果有）
- [ ] 每条关系显示说明（如果有）

#### 测试案例

**案例1**: 车型项目 → 领域项目
```
预期:
- 源节点: PROJ_001 (VehicleProject)
- 目标节点: SSTS_1001 (DomainProject)
- 关系类型: has_domain_project (包含领域项目)
- 关系属性: priority, assignedDate等
```

**案例2**: Epic → FR
```
预期:
- 源节点: Epic_E001 (Epic)
- 目标节点: FR_001 (FeatureRequirement)
- 关系类型: splits_to_fr (拆分为特性需求)
- 关系属性: splitRatio, splitDate等
```

---

### ✅ 测试4: 矩阵缩放和平移

#### 目标
验证矩阵视图支持缩放和平移，方便查看大数据集。

#### 测试步骤

#### 4.1 滑动条缩放
1. 找到矩阵底部的横向滑动条
2. 拖动滑动条左右两端
3. 找到矩阵右侧的纵向滑动条
4. 拖动滑动条上下两端

**验证点**:
- [ ] 横向滑动条控制X轴范围
- [ ] 纵向滑动条控制Y轴范围
- [ ] 滑动条拖动流畅
- [ ] 矩阵同步更新

---

#### 4.2 鼠标滚轮缩放
1. 鼠标悬停在矩阵上
2. 滚动鼠标滚轮（或触控板双指滑动）
3. 观察矩阵放大/缩小效果

**验证点**:
- [ ] 滚轮向上：放大
- [ ] 滚轮向下：缩小
- [ ] 缩放中心为鼠标位置
- [ ] 缩放流畅无卡顿

---

#### 4.3 拖拽平移
1. 按住鼠标左键
2. 拖动矩阵
3. 释放鼠标

**验证点**:
- [ ] 可以拖动查看不同区域
- [ ] 拖动方向正确
- [ ] 拖动流畅

---

#### 4.4 全屏显示（可选）
1. 点击右上角的全屏按钮
2. 矩阵进入全屏模式

**验证点**:
- [ ] 全屏功能可用（部分浏览器可能不支持）
- [ ] Esc退出全屏

---

### ✅ 测试5: 树形视图右键菜单

#### 目标
验证树形视图支持右键菜单快捷操作。

#### 测试步骤
1. 点击顶部 "🌲 树形" 按钮
2. 切换到 "实例树" Tab
3. 展开任意类型节点
4. 在任意实例节点上右键点击

#### 验证点
- [ ] 弹出右键菜单
- [ ] 菜单包含9个选项
- [ ] 菜单项图标显示正确
- [ ] 菜单项分割线正确

#### 菜单项测试

##### 5.1 复制节点ID
**操作**: 右键 → 选择"复制节点ID"

**验证**:
- [ ] 提示"节点ID已复制到剪贴板"
- [ ] 在文本编辑器中粘贴（Ctrl+V）
- [ ] 粘贴的内容为节点ID（如：PROJ_001）

---

##### 5.2 复制路径
**操作**: 右键 → 选择"复制路径"

**验证**:
- [ ] 提示"节点路径已复制到剪贴板"
- [ ] 粘贴的内容为节点key（如：VehicleProject-PROJ_001）

---

##### 5.3 在图谱中查看
**操作**: 右键 → 选择"在图谱中查看"

**验证**:
- [ ] 提示"已触发节点选择，请切换到图谱视图查看"
- [ ] 切换到图谱视图
- [ ] 该节点应该被高亮或选中（取决于实现）

---

##### 5.4 导出子树
**操作**: 右键 → 选择"导出子树"

**验证**:
- [ ] 提示"子树已导出"
- [ ] 自动下载JSON文件
- [ ] 文件名格式：`subtree-{节点key}.json`
- [ ] 打开JSON文件，查看内容完整

---

##### 5.5 编辑节点
**操作**: 右键 → 选择"编辑节点"

**验证**:
- [ ] 提示"编辑功能将在后续版本中实现"
- [ ] 无报错

---

##### 5.6 添加子节点
**操作**: 右键 → 选择"添加子节点"

**验证**:
- [ ] 提示"添加子节点功能将在后续版本中实现"
- [ ] 无报错

---

##### 5.7 删除节点
**操作**: 右键 → 选择"删除节点"（红色危险项）

**验证**:
- [ ] 提示"删除功能需要后端API支持，当前为演示模式"
- [ ] 无报错

---

#### 上下文感知测试

**测试类型节点**:
1. 在"类层次"Tab中右键点击类型节点
2. 观察菜单状态

**验证点**:
- [ ] "复制节点ID"禁用（因为类型节点无nodeId）
- [ ] "在图谱中查看"禁用
- [ ] "编辑节点"禁用
- [ ] "删除节点"禁用

---

## 🎯 综合测试场景

### 场景1: 分析车型项目的关系网络

#### 步骤
1. **仪表盘**: 查看核心节点Top 5，找到车型项目节点
2. **树形视图**: 在实例树中定位该节点
3. **右键菜单**: 复制节点ID
4. **矩阵视图**: 使用排序定位该节点
5. **单元格详情**: 点击查看其关联关系
6. **图谱视图**: 切换查看网络结构

#### 预期效果
在不同视图间流畅切换，全面了解节点信息。

---

### 场景2: 探索大规模关系模式

#### 步骤
1. **矩阵视图**: 设置页大小为100
2. **排序**: 选择"度数降序"
3. **缩放**: 使用滚轮放大关注区域
4. **单元格**: 点击高密度单元格查看详情
5. **关系过滤**: 切换到特定关系类型

#### 预期效果
快速发现关系密集区域，深入分析模式。

---

### 场景3: 批量节点操作

#### 步骤
1. **树形视图**: 搜索定位目标节点
2. **右键菜单**: 导出子树
3. **重复**: 对多个节点执行相同操作
4. **整理**: 收集导出的JSON文件

#### 预期效果
快速导出多个子树进行离线分析。

---

## 📊 性能评估

### 评分标准

#### 加载速度 (0-10分)
- 10分: <200ms
- 8分: <500ms
- 6分: <1s
- 4分: <2s
- 2分: >2s

#### 交互流畅度 (0-10分)
- 10分: 60fps 无卡顿
- 8分: 30fps 偶尔卡顿
- 6分: 20fps 明显卡顿
- 4分: 10fps 严重卡顿
- 2分: <10fps 基本无法使用

#### 功能完整性 (0-10分)
- 10分: 所有功能正常
- 8分: 1-2个小问题
- 6分: 3-4个小问题
- 4分: 多个功能异常
- 2分: 主要功能无法使用

### 评分表

| 测试项 | 加载速度 | 交互流畅度 | 功能完整性 | 总分 |
|--------|----------|------------|------------|------|
| 仪表盘 | __/10 | __/10 | __/10 | __/30 |
| 矩阵视图 | __/10 | __/10 | __/10 | __/30 |
| 树形视图 | __/10 | __/10 | __/10 | __/30 |
| **总分** | __/30 | __/30 | __/30 | __/90 |

**目标总分**: ≥ 75/90

---

## 🐛 问题报告模板

### 问题1: [简短描述]

**严重程度**: 🔴 严重 / 🟡 中等 / 🟢 轻微

**重现步骤**:
1. 
2. 
3. 

**预期结果**:


**实际结果**:


**截图/日志**:
```
（粘贴Console日志或截图）
```

**环境信息**:
- 浏览器: 
- 版本: 
- 操作系统: 

---

## ✅ 测试完成检查表

### 必测项目
- [ ] 仪表盘Pie图表无错误
- [ ] 矩阵视图分页功能正常
- [ ] 矩阵视图排序功能正常
- [ ] 矩阵视图单元格详情正常
- [ ] 矩阵视图缩放平移流畅
- [ ] 树形视图右键菜单显示
- [ ] 右键菜单复制功能正常
- [ ] 右键菜单导出功能正常

### 推荐测试
- [ ] 不同数据集测试
- [ ] 性能基准测试
- [ ] 跨浏览器兼容性测试
- [ ] 综合场景测试

### 压力测试（可选）
- [ ] 导入大数据集（>100节点）
- [ ] 长时间使用测试（>30分钟）
- [ ] 频繁切换视图测试

---

## 🎊 测试通过标准

### 最低标准（必须全部通过）
- ✅ 所有核心功能正常工作
- ✅ 无JavaScript错误
- ✅ 矩阵视图性能提升明显
- ✅ 右键菜单正常显示

### 优秀标准（推荐达成）
- ✅ 性能评分 ≥ 75/90
- ✅ 无已知Bug
- ✅ 用户体验流畅
- ✅ 跨浏览器兼容

---

## 📞 反馈渠道

### 测试问题反馈
1. GitHub Issues
2. 测试报告文档
3. 实时沟通

### 改进建议
欢迎提出任何改进建议！

---

**✅ 准备好开始测试了！**

访问 http://localhost:8080 并按照本指南逐项测试！

---

**文档版本**: v1.0  
**创建日期**: 2026-01-17  
**测试范围**: Sprint 02 - 性能优化与交互增强  
**预计测试时间**: 45-60分钟
