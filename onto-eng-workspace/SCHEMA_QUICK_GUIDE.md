# Schema管理 - 快速使用指南

## 🚀 快速开始

### 1. 访问Schema管理页面

```
打开系统: http://localhost:8080
         ↓
顶部导航栏 → 点击 [Schema] 按钮
         ↓
进入Schema管理页面
```

---

## 📋 主要功能

### 🔍 1. 查看Schema概览

**位置**: 默认"概览"标签

**展示内容**:
- Schema名称和版本
- 实体类型数量
- 关系类型数量
- 数据实例统计
- **未定义类型警告** ⚠️

**示例**:
```
Schema名称: 汽车研发本体模型（当前应用于岚图汽车研发体系）
版本: 0.1.0
实体类型数: 9 种
关系类型数: 30 种
数据实例: 20 个节点，80 条关系

Schema健康度: ✅ 完整定义
```

---

### 📦 2. 查看实体类型

**操作**: 点击"实体类型"标签

**功能**:
- 查看所有实体类型列表
- 点击行展开查看详细属性
- 按使用量排序

**示例**:
```
┌────┬──────────┬────────────┬────────┬────────┬────────┐
│ 1  │ 车型项目  │ VehicleProject │ CLS_01 │ 5个属性 │ 2个实例│
│ 2  │ 系统需求  │ SSTS         │ CLS_02 │ 7个属性 │ 4个实例│
└────┴──────────┴────────────┴────────┴────────┴────────┘

点击展开 → 查看详细属性定义
```

---

### 🔗 3. 查看关系类型

**操作**: 点击"关系类型"标签

**功能**:
- 查看所有关系类型
- 查看源类型和目标类型
- 查看详细说明

**示例**:
```
┌────┬────────┬──────────────┬────────────────┬──────┐
│ 1  │ 拆分为  │ splits_to_fr │ [SSTS] → [FR] │ 6条  │
│ 2  │ 拆解为  │ decomposes_to│ [SSTS] → [SWR]│ 5条  │
└────┴────────┴──────────────┴────────────────┴──────┘
```

---

### 💻 4. 查看JSON

**操作**: 点击"JSON视图"标签

**功能**:
- 查看完整Schema JSON
- 复制JSON到剪贴板

---

### 📥 5. 导出Schema

**操作**: 点击右上角"导出Schema"按钮

**格式选择**:

#### JSON格式
- 用于程序处理
- 文件名: `schema_2026-01-17.json`

#### Markdown格式  
- 用于文档分享
- 包含完整说明
- 文件名: `schema_2026-01-17.md`

---

### 🔍 6. 搜索类型

**位置**: 右上角搜索框

**使用方法**:
```
输入关键词 → 实时过滤结果

示例:
输入 "项目" → 筛选出：
  - 车型项目
  - 领域项目

输入 "splits" → 筛选出：
  - splits_to_fr
  - splits_to_ssts
```

---

## ⚠️ 未定义类型检测

### 什么是未定义类型？

数据中存在，但Schema中没有定义的类型。

### 在哪里查看？

**位置**: "概览"标签 → "未定义类型检测"区域

### 显示内容

```
⚠️ 未定义类型检测
─────────────────
未定义的实体类型:
  [Task] (5 个实例)
  [Sprint] (3 个实例)

未定义的关系类型:
  [has_feature] (2 条关系)
```

### 如何处理？

1. 确认是否需要这些类型
2. 如需要，补充到Schema中
3. 如不需要，清理数据

---

## 📊 使用量统计

### 实体类型使用量

**位置**: "实体类型"标签 → "使用量"列

**含义**: 该类型在数据中有多少个实例

**示例**:
```
VehicleProject: 2 个 ✅（正在使用）
TestIssue: 0 个 ⚠️（未使用）
```

### 关系类型使用量

**位置**: "关系类型"标签 → "使用量"列

**含义**: 该类型的关系有多少条

**示例**:
```
manages: 3 条 ✅（正在使用）
produces: 0 条 ⚠️（未使用）
```

---

## 💡 使用技巧

### 1. 快速定位类型

```
使用搜索框输入部分关键词
例如: 输入 "Vehicle" 快速找到 VehicleProject
```

### 2. 排序查找

```
点击"使用量"列标题
→ 降序：查看最常用的类型
→ 升序：查看很少用的类型
```

### 3. 批量导出

```
定期导出Schema
→ 文件命名带日期
→ 便于版本对比和回溯
```

### 4. 健康度检查

```
定期查看"未定义类型"
→ 及时发现数据质量问题
→ 保持Schema完整性
```

---

## 🎯 常见场景

### 场景1: 新成员了解Schema

```
1. 打开Schema视图
2. 查看"概览"了解整体
3. 浏览"实体类型"和"关系类型"
4. 导出Markdown文档学习
```

### 场景2: 检查数据质量

```
1. 查看顶部"未定义类型"数量
2. 如果>0，点击"概览"查看详情
3. 记录需要补充的类型
4. 更新Schema或清理数据
```

### 场景3: 添加新类型前参考

```
1. 切换到相应标签（实体/关系）
2. 查看现有类型的定义方式
3. 点击展开查看属性示例
4. 参考相似类型设计新类型
```

### 场景4: 生成Schema文档

```
1. 点击"导出Schema"
2. 选择Markdown格式
3. 分享给团队成员
4. 用作技术文档的一部分
```

---

## ❓ 常见问题

### Q1: 为什么有未定义类型？

**A**: 数据导入时包含了Schema中未定义的类型。这可能是：
- 新增数据未同步更新Schema
- 历史数据包含已废弃的类型
- 数据格式错误

**建议**: 及时补充Schema定义或清理数据。

---

### Q2: 如何知道某个类型被使用了多少次？

**A**: 
- 实体类型：查看"实体类型"标签的"使用量"列
- 关系类型：查看"关系类型"标签的"使用量"列

使用量为0表示该类型未被使用。

---

### Q3: 导出的Markdown文档包含什么？

**A**: 包含：
- Schema基本信息
- 所有实体类型定义
- 所有关系类型定义
- 使用量统计
- 未定义类型警告（如有）
- 导出时间

---

### Q4: 可以在线编辑Schema吗？

**A**: 当前版本仅支持查看和导出。编辑功能规划在后续版本。

**临时方案**:
1. 导出JSON
2. 本地编辑
3. 通过"导入数据"功能更新

---

### Q5: 搜索支持正则表达式吗？

**A**: 当前仅支持简单的字符串匹配，不支持正则表达式。

**搜索规则**:
- 大小写不敏感
- 支持部分匹配
- 搜索范围：类型ID + 类型标签 + 说明

---

## 🔗 相关文档

- 📘 [Schema管理功能详细文档](./SCHEMA_MANAGEMENT_FEATURE.md)
- 📊 [关系类型可视化设计](./RELATION_TYPE_VISUALIZATION_REDESIGN.md)
- 🎯 [关系类型新功能指南](./RELATION_TYPE_NEW_FEATURES.md)

---

## 📞 需要帮助？

如有问题或建议：
1. 查看详细文档
2. 查看系统日志
3. 反馈问题和建议

---

**更新时间**: 2026-01-17  
**版本**: v0.2.0
