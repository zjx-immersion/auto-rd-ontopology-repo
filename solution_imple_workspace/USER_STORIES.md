# 本体图谱系统 - 用户故事集

## 文档说明
本文档基于 `ONTOLOGY_SYSTEM_REQUIREMENTS.md` 将系统需求转换为用户故事（User Stories），便于开发团队理解用户需求并进行敏捷开发。

**格式**: 作为<角色>，我想要<功能>，以便<价值>

---

## 一、本体建模能力

### Epic 1: 可视化本体设计器

#### US-1.1: 拖拽创建实体类型
**作为** 领域专家  
**我想要** 通过拖拽方式快速创建实体类型  
**以便** 无需编写代码就能构建本体模型

**验收标准**:
- [ ] 可以从工具栏拖拽一个"新实体类型"按钮到画布
- [ ] 双击或点击可以编辑实体类型名称
- [ ] 可以为实体类型设置图标和颜色
- [ ] 实体类型自动显示在类型列表中
- [ ] 支持撤销/重做操作

**优先级**: P0 - 核心必备  
**估算工时**: 8小时  
**依赖**: 无

---

#### US-1.2: 定义实体属性
**作为** 领域专家  
**我想要** 为实体类型添加和配置属性（DataProperty）  
**以便** 详细描述实体的特征

**验收标准**:
- [ ] 点击实体类型后可以打开属性编辑面板
- [ ] 可以添加新属性：名称、类型、描述
- [ ] 支持的属性类型：String, Integer, Float, Boolean, Date, Enum, Text
- [ ] 可以设置属性约束：
  - [ ] 必填（required）
  - [ ] 唯一（unique）
  - [ ] 默认值（defaultValue）
  - [ ] 值域范围（min/max）
  - [ ] 枚举值列表（对于Enum类型）
- [ ] 可以删除、排序属性
- [ ] 属性变更实时保存

**优先级**: P0 - 核心必备  
**估算工时**: 12小时  
**依赖**: US-1.1

---

#### US-1.3: 设置类的继承关系
**作为** 知识工程师  
**我想要** 定义实体类型之间的继承关系  
**以便** 实现本体的层次结构和属性继承

**验收标准**:
- [ ] 可以拖拽连线表示"继承自"（is-a）关系
- [ ] 子类自动继承父类的所有属性
- [ ] 可以在子类中覆盖父类属性
- [ ] 支持多层继承（A继承B，B继承C）
- [ ] 检测并阻止循环继承
- [ ] 继承关系在树形视图中清晰展示

**优先级**: P1 - 重要增强  
**估算工时**: 10小时  
**依赖**: US-1.1, US-1.2

---

#### US-1.4: 可视化创建关系类型
**作为** 领域专家  
**我想要** 定义实体之间的关系类型（ObjectProperty）  
**以便** 表达领域知识中的关联关系

**验收标准**:
- [ ] 可以选择两个实体类型，拖拽创建关系
- [ ] 可以命名关系类型（如："包含"、"依赖"、"实现"）
- [ ] 可以设置关系的方向性（单向/双向）
- [ ] 可以设置关系的域（domain）和值域（range）
- [ ] 可以为关系添加属性（如：优先级、开始日期等）
- [ ] 关系类型可复用于其他实体对

**优先级**: P0 - 核心必备  
**估算工时**: 10小时  
**依赖**: US-1.1

---

#### US-1.5: 设置关系特性
**作为** AI科学家  
**我想要** 为关系类型设置语义特性（对称、传递等）  
**以便** 进行知识推理和自动推断

**验收标准**:
- [ ] 可以设置关系为"对称性"（如：A配偶B，则B配偶A）
- [ ] 可以设置关系为"传递性"（如：A依赖B，B依赖C，则A依赖C）
- [ ] 可以设置关系为"反射性"（如：A等于A）
- [ ] 可以设置关系为"函数性"（一个主体只能有一个客体）
- [ ] 可以设置关系为"逆函数性"（一个客体只能有一个主体）
- [ ] 可以定义逆关系（如："父子"的逆关系是"子父"）
- [ ] 关系特性影响推理结果

**优先级**: P1 - 重要增强  
**估算工时**: 8小时  
**依赖**: US-1.4

---

#### US-1.6: 定义基数约束
**作为** 知识工程师  
**我想要** 为关系设置基数约束  
**以便** 控制实体间关系的数量

**验收标准**:
- [ ] 可以设置最小基数（minCardinality，如：至少1个）
- [ ] 可以设置最大基数（maxCardinality，如：最多3个）
- [ ] 常用预设：0..1（可选单个）、1（必须有一个）、0..*（任意多个）、1..*（至少一个）
- [ ] 创建实例时验证基数约束
- [ ] 违反约束时给出明确的错误提示

**优先级**: P1 - 重要增强  
**估算工时**: 6小时  
**依赖**: US-1.4

---

### Epic 2: 本体模板库

#### US-2.1: 使用预定义模板
**作为** 领域专家  
**我想要** 从模板库选择行业模板快速开始  
**以便** 节省从零开始设计的时间

**验收标准**:
- [ ] 系统提供至少5个行业模板：
  - [ ] 汽车研发
  - [ ] 医疗健康
  - [ ] 金融风控
  - [ ] 软件工程
  - [ ] 供应链管理
- [ ] 可以预览模板的结构和示例数据
- [ ] 可以基于模板创建新项目
- [ ] 模板包含：实体类型、关系类型、示例实例

**优先级**: P1 - 重要增强  
**估算工时**: 20小时（包含模板设计）  
**依赖**: US-1.1, US-1.4

---

#### US-2.2: 保存自定义模板
**作为** 知识工程师  
**我想要** 将当前本体保存为模板  
**以便** 在未来项目中复用

**验收标准**:
- [ ] 可以将当前本体导出为模板
- [ ] 可以为模板命名、添加描述和标签
- [ ] 可以选择是否包含实例数据
- [ ] 模板存储在本地或云端
- [ ] 可以分享模板给团队成员

**优先级**: P2 - 高级功能  
**估算工时**: 8小时  
**依赖**: US-2.1

---

### Epic 3: 本体复用与集成

#### US-3.1: 导入外部OWL本体
**作为** AI科学家  
**我想要** 导入标准的OWL本体文件  
**以便** 复用已有的本体定义

**验收标准**:
- [ ] 支持导入OWL/XML格式
- [ ] 支持导入OWL Functional Syntax格式
- [ ] 支持导入RDF/RDFS格式
- [ ] 导入时可以预览本体结构
- [ ] 可以选择性导入（只导入特定类或关系）
- [ ] 自动解析命名空间
- [ ] 检测并解决命名冲突

**优先级**: P1 - 重要增强  
**估算工时**: 16小时  
**依赖**: US-1.1, US-1.4

---

#### US-3.2: 本体对齐
**作为** 知识工程师  
**我想要** 将两个本体中的相似概念建立映射  
**以便** 集成不同来源的知识

**验收标准**:
- [ ] 可以选择两个本体进行对齐
- [ ] 系统自动建议可能相似的概念（基于名称、描述）
- [ ] 可以手动建立等价映射（owl:equivalentClass）
- [ ] 可以建立上下位关系映射（rdfs:subClassOf）
- [ ] 对齐结果可以保存和导出
- [ ] 支持批量对齐操作

**优先级**: P2 - 高级功能  
**估算工时**: 12小时  
**依赖**: US-3.1

---

## 二、可视化与交互能力

### Epic 4: 多视图展示

#### US-4.1: 图谱视图布局切换
**作为** 用户  
**我想要** 切换不同的图谱布局算法  
**以便** 以最适合的方式查看数据

**验收标准**:
- [ ] 支持至少5种布局：
  - [ ] 层次布局（适合树形结构）
  - [ ] 力导向布局（适合网络结构）
  - [ ] 圆形布局（适合关系展示）
  - [ ] 网格布局（适合对齐查看）
  - [ ] 随机布局
- [ ] 布局切换平滑过渡（动画）
- [ ] 可以固定某些节点位置
- [ ] 布局参数可调（如：间距、方向）

**优先级**: P1 - 重要增强  
**估算工时**: 10小时  
**依赖**: 现有图谱视图

---

#### US-4.2: 树形视图
**作为** 领域专家  
**我想要** 以树形结构查看类层次和实例  
**以便** 清晰了解本体的组织结构

**验收标准**:
- [ ] 左侧面板显示树形视图
- [ ] 类层次树：显示所有实体类型的继承关系
- [ ] 实例树：显示每个类型下的实例列表
- [ ] 支持展开/折叠节点
- [ ] 点击树节点在主视图中高亮显示
- [ ] 支持拖拽调整树节点顺序
- [ ] 支持搜索和过滤

**优先级**: P1 - 重要增强  
**估算工时**: 12小时  
**依赖**: US-1.1, US-1.3

---

#### US-4.3: 矩阵视图
**作为** AI科学家  
**我想要** 以矩阵形式查看实体间的关系  
**以便** 分析关系模式和强度

**验收标准**:
- [ ] 行列分别代表不同实体类型
- [ ] 单元格显示关系数量或强度
- [ ] 支持热力图着色（关系越多颜色越深）
- [ ] 点击单元格可以查看详细关系列表
- [ ] 可以过滤显示特定关系类型
- [ ] 可以导出为图片或CSV

**优先级**: P1 - 重要增强  
**估算工时**: 10小时  
**依赖**: 现有数据加载

---

#### US-4.4: 时间轴视图
**作为** 用户  
**我想要** 查看数据随时间的变化  
**以便** 分析演化趋势

**验收标准**:
- [ ] 横轴表示时间线
- [ ] 节点按时间属性（如：创建时间）排列
- [ ] 可以播放动画展示数据演化
- [ ] 可以拖动时间滑块查看特定时间点
- [ ] 支持缩放时间范围
- [ ] 可以高亮显示变更事件

**优先级**: P2 - 高级功能  
**估算工时**: 14小时  
**依赖**: 版本控制功能

---

### Epic 5: 交互操作增强

#### US-5.1: 图谱直接编辑
**作为** 用户  
**我想要** 直接在图谱上编辑节点和关系  
**以便** 快速修改数据

**验收标准**:
- [ ] 双击节点可以就地编辑名称
- [ ] 拖拽节点可以创建关系
- [ ] 右键节点显示上下文菜单（编辑、删除、复制）
- [ ] Del键删除选中的节点或边
- [ ] Ctrl+Z 撤销，Ctrl+Y 重做
- [ ] 所有操作实时保存
- [ ] 操作有确认提示（删除等）

**优先级**: P0 - 核心必备  
**估算工时**: 8小时  
**依赖**: 现有图谱视图

---

#### US-5.2: 批量操作
**作为** 用户  
**我想要** 同时操作多个节点  
**以便** 提高编辑效率

**验收标准**:
- [ ] 按住Ctrl点击可以多选节点
- [ ] 框选（拖拽矩形）可以选择区域内的所有节点
- [ ] 可以批量修改属性（如：统一设置状态为"已完成"）
- [ ] 可以批量删除
- [ ] 可以批量移动（拖拽）
- [ ] 可以批量应用样式（颜色、大小）
- [ ] 批量操作可撤销

**优先级**: P1 - 重要增强  
**估算工时**: 10小时  
**依赖**: US-5.1

---

#### US-5.3: 高级搜索
**作为** 用户  
**我想要** 使用复杂条件搜索节点和关系  
**以便** 快速找到目标数据

**验收标准**:
- [ ] 支持全文搜索（节点名称、属性值）
- [ ] 支持多条件组合（AND、OR、NOT）
- [ ] 支持正则表达式
- [ ] 可以保存常用搜索条件
- [ ] 搜索结果高亮显示
- [ ] 可以在搜索结果中导航（上一个/下一个）
- [ ] 显示搜索历史记录

**优先级**: P1 - 重要增强  
**估算工时**: 12小时  
**依赖**: 现有搜索功能

---

#### US-5.4: 路径查找和展开
**作为** 用户  
**我想要** 查找两个节点之间的所有路径  
**以便** 理解它们的关联关系

**验收标准**:
- [ ] 可以选择两个节点作为起点和终点
- [ ] 显示所有可能的路径
- [ ] 可以按路径长度排序
- [ ] 高亮显示当前查看的路径
- [ ] 可以展开节点的邻居节点
- [ ] 支持设置展开层数（1层、2层、全部）
- [ ] 可以保存感兴趣的路径

**优先级**: P1 - 重要增强  
**估算工时**: 10小时  
**依赖**: 现有路径追溯功能

---

## 三、数据管理能力

### Epic 6: 数据导入导出增强

#### US-6.1: 多格式导入
**作为** 用户  
**我想要** 从多种格式导入数据  
**以便** 整合不同来源的知识

**验收标准**:
- [ ] 支持JSON/JSON-LD导入（已有）
- [ ] 支持RDF/XML导入
- [ ] 支持Turtle格式导入
- [ ] 支持CSV/Excel导入（带字段映射）
- [ ] 支持Neo4j Cypher导入
- [ ] 导入前可以预览数据
- [ ] 显示导入进度条
- [ ] 导入完成后显示统计报告

**优先级**: P1 - 重要增强  
**估算工时**: 16小时  
**依赖**: 现有导入功能

---

#### US-6.2: 增量导入
**作为** 用户  
**我想要** 增量导入新数据而不覆盖现有数据  
**以便** 持续扩充知识库

**验收标准**:
- [ ] 可以选择导入模式：
  - [ ] 覆盖模式（替换同ID的节点）
  - [ ] 追加模式（保留现有数据，新增导入数据）
  - [ ] 合并模式（合并同ID节点的属性）
  - [ ] 忽略模式（跳过已存在的节点）
- [ ] 检测并提示数据冲突
- [ ] 可以预览冲突并手动解决
- [ ] 导入可以回滚

**优先级**: P1 - 重要增强  
**估算工时**: 10小时  
**依赖**: US-6.1

---

#### US-6.3: 数据清洗
**作为** 用户  
**我想要** 在导入时自动清洗数据  
**以便** 保证数据质量

**验收标准**:
- [ ] 自动去除重复节点（基于ID或名称）
- [ ] 格式标准化（如：日期格式统一）
- [ ] 处理缺失值（填充默认值或标记为空）
- [ ] 检测异常值（如：负数年龄）
- [ ] 提供清洗报告
- [ ] 可以配置清洗规则

**优先级**: P2 - 高级功能  
**估算工时**: 12小时  
**依赖**: US-6.1

---

### Epic 7: 版本控制

#### US-7.1: 创建版本快照
**作为** 知识工程师  
**我想要** 为当前本体创建版本快照  
**以便** 记录重要的里程碑

**验收标准**:
- [ ] 可以一键创建版本
- [ ] 为版本输入名称和说明
- [ ] 自动记录时间戳和创建者
- [ ] 版本列表显示所有历史版本
- [ ] 可以查看版本详情（节点数、边数、主要变更）

**优先级**: P1 - 重要增强  
**估算工时**: 8小时  
**依赖**: 无

---

#### US-7.2: 版本比较
**作为** 知识工程师  
**我想要** 比较两个版本的差异  
**以便** 了解本体的演化

**验收标准**:
- [ ] 可以选择两个版本进行对比
- [ ] 显示差异摘要：
  - [ ] 新增的节点和边
  - [ ] 删除的节点和边
  - [ ] 修改的属性
- [ ] 差异可视化（不同颜色标记）
- [ ] 可以导出差异报告
- [ ] 可以查看变更历史时间线

**优先级**: P1 - 重要增强  
**估算工时**: 12小时  
**依赖**: US-7.1

---

#### US-7.3: 版本回滚
**作为** 知识工程师  
**我想要** 回滚到历史版本  
**以便** 撤销错误的变更

**验收标准**:
- [ ] 可以选择任意历史版本
- [ ] 回滚前预览变更内容
- [ ] 回滚操作需要确认
- [ ] 回滚后创建新的版本记录
- [ ] 回滚操作可撤销
- [ ] 记录回滚操作到变更日志

**优先级**: P1 - 重要增强  
**估算工时**: 8小时  
**依赖**: US-7.1, US-7.2

---

### Epic 8: 数据质量保证

#### US-8.1: Schema一致性检查
**作为** 知识工程师  
**我想要** 验证数据是否符合Schema定义  
**以便** 保证数据质量

**验收标准**:
- [ ] 一键执行一致性检查
- [ ] 检查项包括：
  - [ ] 节点类型是否在Schema中定义
  - [ ] 节点属性是否符合类型定义
  - [ ] 必填属性是否缺失
  - [ ] 属性值是否在允许范围内
  - [ ] 关系类型是否定义
  - [ ] 关系的source和target类型是否匹配domain/range
- [ ] 生成检查报告，列出所有错误和警告
- [ ] 点击错误可以定位到问题节点
- [ ] 可以批量修复常见错误

**优先级**: P0 - 核心必备  
**估算工时**: 12小时  
**依赖**: Schema定义

---

#### US-8.2: 引用完整性检查
**作为** 知识工程师  
**我想要** 检查关系引用的完整性  
**以便** 避免悬空引用

**验收标准**:
- [ ] 检查所有边的source节点是否存在
- [ ] 检查所有边的target节点是否存在
- [ ] 列出所有孤立节点（无任何关系）
- [ ] 列出所有悬空边（引用不存在的节点）
- [ ] 可以自动删除悬空边
- [ ] 可以标记孤立节点

**优先级**: P0 - 核心必备  
**估算工时**: 6小时  
**依赖**: 现有数据结构

---

#### US-8.3: 数据质量评分
**作为** 知识工程师  
**我想要** 查看整体数据质量评分  
**以便** 持续改进知识库

**验收标准**:
- [ ] 显示总体质量分数（0-100）
- [ ] 分项评分：
  - [ ] 完整性（必填项填充率）
  - [ ] 一致性（符合Schema比例）
  - [ ] 准确性（异常值比例）
  - [ ] 覆盖率（实例数/类型数）
- [ ] 质量趋势图（随时间变化）
- [ ] 提供改进建议
- [ ] 可以设置质量目标

**优先级**: P2 - 高级功能  
**估算工时**: 10小时  
**依赖**: US-8.1, US-8.2

---

## 四、知识推理能力

### Epic 9: 推理引擎

#### US-9.1: 传递性推理
**作为** AI科学家  
**我想要** 自动推断传递性关系  
**以便** 发现隐含的知识

**验收标准**:
- [ ] 可以标记关系为"传递性"
- [ ] 执行推理时自动推断传递关系
  - 例如：A依赖B，B依赖C → 推断出A依赖C
- [ ] 推断出的关系用不同样式显示（如：虚线）
- [ ] 可以查看推理路径（A→B→C）
- [ ] 可以将推断关系保存为实际关系
- [ ] 推理结果可以导出

**优先级**: P1 - 重要增强  
**估算工时**: 10小时  
**依赖**: US-1.5（关系特性）

---

#### US-9.2: 自定义推理规则
**作为** AI科学家  
**我想要** 定义自定义推理规则  
**以便** 实现领域特定的知识推理

**验收标准**:
- [ ] 可以创建IF-THEN规则
- [ ] 规则编辑器支持：
  - [ ] 条件匹配（节点类型、属性值、关系）
  - [ ] 逻辑组合（AND、OR、NOT）
  - [ ] 动作（创建节点、创建关系、修改属性）
- [ ] 规则可以命名和保存
- [ ] 可以启用/禁用规则
- [ ] 执行推理时应用所有启用的规则
- [ ] 记录规则执行日志

**优先级**: P1 - 重要增强  
**估算工时**: 16小时  
**依赖**: US-9.1

---

#### US-9.3: 推理解释
**作为** 用户  
**我想要** 了解推理结果是如何得出的  
**以便** 验证推理的正确性

**验收标准**:
- [ ] 点击推断出的关系可以查看"推理路径"
- [ ] 显示应用的规则或关系特性
- [ ] 显示推理步骤（Step 1: ..., Step 2: ...）
- [ ] 可视化推理树
- [ ] 可以导出推理解释报告

**优先级**: P1 - 重要增强  
**估算工时**: 8小时  
**依赖**: US-9.1, US-9.2

---

### Epic 10: 查询与分析

#### US-10.1: SPARQL查询界面
**作为** AI科学家  
**我想要** 使用SPARQL查询知识图谱  
**以便** 进行复杂的数据分析

**验收标准**:
- [ ] 提供SPARQL编辑器（代码高亮、自动补全）
- [ ] 支持标准SPARQL 1.1语法
- [ ] 提供常用查询模板：
  - [ ] 查找特定类型的所有实例
  - [ ] 查找具有特定属性值的节点
  - [ ] 查找两跳关系
  - [ ] 聚合查询（COUNT, SUM, AVG）
- [ ] 查询结果以表格形式展示
- [ ] 可以将查询结果导出为CSV/JSON
- [ ] 可以保存常用查询

**优先级**: P1 - 重要增强  
**估算工时**: 20小时  
**依赖**: RDF存储

---

#### US-10.2: 可视化查询构建器
**作为** 领域专家  
**我想要** 通过图形界面构建查询  
**以便** 无需学习SPARQL语法

**验收标准**:
- [ ] 拖拽方式构建查询条件
- [ ] 可以选择：
  - [ ] 节点类型
  - [ ] 属性过滤条件
  - [ ] 关系路径
- [ ] 实时预览查询结果
- [ ] 可以切换到SPARQL代码视图
- [ ] 自动生成对应的SPARQL查询

**优先级**: P1 - 重要增强  
**估算工时**: 16小时  
**依赖**: US-10.1

---

#### US-10.3: 图分析算法
**作为** AI科学家  
**我想要** 运行图分析算法  
**以便** 发现数据中的模式和关键节点

**验收标准**:
- [ ] 支持以下算法：
  - [ ] PageRank（节点重要性）
  - [ ] Betweenness Centrality（中介中心性）
  - [ ] Community Detection（社区发现）
  - [ ] Shortest Path（最短路径）
- [ ] 算法结果可视化（如：节点大小表示重要性）
- [ ] 可以调整算法参数
- [ ] 显示算法执行时间
- [ ] 可以导出分析结果

**优先级**: P2 - 高级功能  
**估算工时**: 20小时  
**依赖**: 图数据库

---

## 五、协作与团队能力

### Epic 11: 权限管理

#### US-11.1: 用户注册和登录
**作为** 用户  
**我想要** 创建个人账号并登录系统  
**以便** 安全地访问和管理数据

**验收标准**:
- [ ] 提供注册页面（邮箱、用户名、密码）
- [ ] 邮箱验证
- [ ] 登录页面（记住密码选项）
- [ ] 忘记密码功能
- [ ] 登录后显示用户头像和名称
- [ ] 可以修改个人信息

**优先级**: P1 - 重要增强  
**估算工时**: 12小时  
**依赖**: 无

---

#### US-11.2: 角色和权限
**作为** 管理员  
**我想要** 为不同用户分配角色和权限  
**以便** 控制数据访问和操作

**验收标准**:
- [ ] 预定义角色：
  - [ ] Admin（管理员）：所有权限
  - [ ] Editor（编辑者）：读、写
  - [ ] Viewer（查看者）：只读
- [ ] 可以自定义角色
- [ ] 细粒度权限：
  - [ ] 查看Schema
  - [ ] 编辑Schema
  - [ ] 查看数据
  - [ ] 编辑数据
  - [ ] 删除数据
  - [ ] 导入导出
  - [ ] 用户管理
- [ ] 为用户分配角色
- [ ] 权限不足时显示友好提示

**优先级**: P1 - 重要增强  
**估算工时**: 16小时  
**依赖**: US-11.1

---

#### US-11.3: 项目级权限
**作为** 管理员  
**我想要** 为不同项目设置独立的权限  
**以便** 实现数据隔离

**验收标准**:
- [ ] 可以创建多个项目
- [ ] 每个项目有独立的成员列表
- [ ] 为成员分配项目内角色
- [ ] 用户只能看到有权限的项目
- [ ] 可以将用户从项目中移除

**优先级**: P2 - 高级功能  
**估算工时**: 10小时  
**依赖**: US-11.2

---

### Epic 12: 实时协作

#### US-12.1: 多人同时编辑
**作为** 团队成员  
**我想要** 与其他人同时编辑本体  
**以便** 提高协作效率

**验收标准**:
- [ ] 显示当前在线用户列表
- [ ] 实时显示其他用户的光标位置
- [ ] 其他用户的编辑实时同步
- [ ] 同时编辑同一节点时提示冲突
- [ ] 提供冲突解决机制（保留我的/保留他的/合并）

**优先级**: P2 - 高级功能  
**估算工时**: 20小时  
**依赖**: WebSocket

---

#### US-12.2: 评论和讨论
**作为** 团队成员  
**我想要** 在节点上添加评论  
**以便** 与团队讨论

**验收标准**:
- [ ] 右键节点可以"添加评论"
- [ ] 评论显示作者、时间、内容
- [ ] 支持@提及其他用户
- [ ] 被@的用户收到通知
- [ ] 可以回复评论（讨论线程）
- [ ] 可以编辑和删除自己的评论
- [ ] 有未读评论时节点显示标记

**优先级**: P2 - 高级功能  
**估算工时**: 14小时  
**依赖**: US-11.1

---

## 六、AI辅助能力

### Epic 13: 智能建模助手

#### US-13.1: 实体类型推荐
**作为** 领域专家  
**我想要** 在创建实体时获得类型推荐  
**以便** 加快建模速度

**验收标准**:
- [ ] 输入实体名称时显示推荐类型
- [ ] 推荐基于：
  - [ ] 名称关键词匹配
  - [ ] 历史使用频率
  - [ ] 相似实体的类型
- [ ] 显示推荐理由
- [ ] 可以接受或忽略推荐

**优先级**: P2 - 高级功能  
**估算工时**: 10小时  
**依赖**: AI服务

---

#### US-13.2: 关系推荐
**作为** 领域专家  
**我想要** 在创建关系时获得推荐  
**以便** 发现可能遗漏的关系

**验收标准**:
- [ ] 选择两个节点时推荐可能的关系类型
- [ ] 基于：
  - [ ] 节点类型的常见关系
  - [ ] Schema中定义的domain/range
  - [ ] 相似节点间的关系
- [ ] 显示推荐置信度
- [ ] 一键创建推荐的关系

**优先级**: P2 - 高级功能  
**估算工时**: 12小时  
**依赖**: US-13.1

---

#### US-13.3: 从文本提取实体和关系
**作为** 领域专家  
**我想要** 从文档中自动提取实体和关系  
**以便** 快速构建知识图谱

**验收标准**:
- [ ] 上传文本文件或粘贴文本
- [ ] 自动识别实体（NER）
- [ ] 自动识别关系（RE）
- [ ] 预览提取结果
- [ ] 可以修正识别错误
- [ ] 一键导入到图谱
- [ ] 支持中英文

**优先级**: P2 - 高级功能  
**估算工时**: 24小时  
**依赖**: NLP模型

---

### Epic 14: 自然语言接口

#### US-14.1: 自然语言查询
**作为** 领域专家  
**我想要** 用自然语言提问  
**以便** 无需学习查询语言

**验收标准**:
- [ ] 输入框支持自然语言问题
- [ ] 示例问题：
  - "找出所有高优先级的Epic"
  - "哪些任务依赖于Task-001？"
  - "显示项目A的所有需求"
- [ ] 系统自动转换为SPARQL查询
- [ ] 显示查询结果
- [ ] 可以查看生成的SPARQL代码
- [ ] 支持追问（基于上下文）

**优先级**: P2 - 高级功能  
**估算工时**: 20小时  
**依赖**: AI服务（NL2SPARQL）

---

#### US-14.2: 智能问答
**作为** 用户  
**我想要** 询问知识图谱中的知识  
**以便** 快速获取信息

**验收标准**:
- [ ] 聊天式界面
- [ ] 理解多种问题形式
- [ ] 基于图谱数据生成答案
- [ ] 答案引用来源节点
- [ ] 可以展开查看详细信息
- [ ] 记录对话历史

**优先级**: P2 - 高级功能  
**估算工时**: 16小时  
**依赖**: US-14.1

---

### Epic 15: 知识图谱嵌入

#### US-15.1: 训练图嵌入模型
**作为** AI科学家  
**我想要** 为知识图谱训练嵌入模型  
**以便** 进行下游任务

**验收标准**:
- [ ] 支持多种嵌入算法：
  - [ ] Node2Vec
  - [ ] DeepWalk
  - [ ] TransE
- [ ] 可以配置超参数（维度、窗口大小等）
- [ ] 显示训练进度
- [ ] 可视化嵌入空间（t-SNE/UMAP）
- [ ] 保存训练好的模型

**优先级**: P2 - 高级功能  
**估算工时**: 24小时  
**依赖**: Python AI服务

---

#### US-15.2: 相似度搜索
**作为** AI科学家  
**我想要** 基于嵌入向量搜索相似节点  
**以便** 发现潜在关联

**验收标准**:
- [ ] 选择一个节点作为查询
- [ ] 显示Top-N最相似的节点
- [ ] 显示相似度分数
- [ ] 可视化相似节点的分布
- [ ] 可以调整相似度阈值

**优先级**: P2 - 高级功能  
**估算工时**: 10小时  
**依赖**: US-15.1

---

#### US-15.3: 关系预测
**作为** AI科学家  
**我想要** 预测可能存在的关系  
**以便** 补全知识图谱

**验收标准**:
- [ ] 基于嵌入模型预测缺失关系
- [ ] 显示预测的关系及置信度
- [ ] 可以批量接受高置信度的预测
- [ ] 预测结果可以人工审核
- [ ] 记录预测历史和准确率

**优先级**: P2 - 高级功能  
**估算工时**: 14小时  
**依赖**: US-15.1

---

## 七、用户体验

### Epic 16: 引导与帮助

#### US-16.1: 新手引导
**作为** 新用户  
**我想要** 有引导教程帮我快速上手  
**以便** 了解系统的核心功能

**验收标准**:
- [ ] 首次登录显示欢迎向导
- [ ] 交互式教程（高亮+提示）
- [ ] 教程包括：
  - [ ] 创建第一个实体
  - [ ] 添加属性
  - [ ] 创建关系
  - [ ] 导入数据
  - [ ] 搜索和查询
- [ ] 可以跳过或重新观看教程
- [ ] 提供示例项目供学习

**优先级**: P1 - 重要增强  
**估算工时**: 12小时  
**依赖**: 无

---

#### US-16.2: 上下文帮助
**作为** 用户  
**我想要** 在使用功能时获得即时帮助  
**以便** 解决遇到的问题

**验收标准**:
- [ ] 所有按钮和字段有工具提示
- [ ] 点击"?"图标打开相关帮助文档
- [ ] 帮助文档嵌入在侧边栏
- [ ] 搜索帮助文档
- [ ] 常见问题（FAQ）
- [ ] 视频教程链接

**优先级**: P1 - 重要增强  
**估算工时**: 10小时  
**依赖**: 帮助文档

---

### Epic 17: 个性化

#### US-17.1: 主题切换
**作为** 用户  
**我想要** 切换界面主题  
**以便** 适应不同的使用场景

**验收标准**:
- [ ] 支持亮色主题
- [ ] 支持暗色主题
- [ ] 主题切换平滑过渡
- [ ] 记住用户的主题偏好
- [ ] 可以根据系统时间自动切换

**优先级**: P2 - 高级功能  
**估算工时**: 6小时  
**依赖**: 无

---

#### US-17.2: 布局自定义
**作为** 用户  
**我想要** 自定义界面布局  
**以便** 优化我的工作流程

**验收标准**:
- [ ] 可以调整面板大小
- [ ] 可以隐藏/显示面板
- [ ] 可以拖拽调整面板位置
- [ ] 可以保存布局预设
- [ ] 可以重置为默认布局

**优先级**: P2 - 高级功能  
**估算工时**: 10小时  
**依赖**: 无

---

#### US-17.3: 快捷键配置
**作为** 高级用户  
**我想要** 自定义快捷键  
**以便** 提高操作效率

**验收标准**:
- [ ] 显示所有可用快捷键列表
- [ ] 可以修改快捷键绑定
- [ ] 检测快捷键冲突
- [ ] 可以恢复默认快捷键
- [ ] 导出/导入快捷键配置

**优先级**: P2 - 高级功能  
**估算工时**: 8小时  
**依赖**: 无

---

## 八、技术支撑

### Epic 18: 性能优化

#### US-18.1: 大规模数据处理
**作为** 用户  
**我想要** 流畅地处理大规模数据  
**以便** 支持企业级应用

**验收标准**:
- [ ] 支持10万+节点的图谱
- [ ] 图谱渲染时间 < 2秒（1000节点）
- [ ] 懒加载：只加载可见区域的节点
- [ ] 虚拟滚动：表格视图支持海量数据
- [ ] 分页加载：API支持分页
- [ ] 进度指示：长时间操作显示进度

**优先级**: P1 - 重要增强  
**估算工时**: 16小时  
**依赖**: 数据库优化

---

#### US-18.2: 查询性能优化
**作为** 用户  
**我想要** 快速获得查询结果  
**以便** 提高工作效率

**验收标准**:
- [ ] SPARQL查询响应 < 100ms（简单查询）
- [ ] SPARQL查询响应 < 1s（复杂查询）
- [ ] 数据库索引优化
- [ ] 查询结果缓存
- [ ] 查询计划优化建议

**优先级**: P1 - 重要增强  
**估算工时**: 12小时  
**依赖**: 图数据库

---

---

## 附录：优先级总结

### P0 - 核心必备（立即开发）
- US-1.1: 拖拽创建实体类型
- US-1.2: 定义实体属性
- US-1.4: 可视化创建关系类型
- US-5.1: 图谱直接编辑
- US-8.1: Schema一致性检查
- US-8.2: 引用完整性检查

**总计**: 6个故事，约56小时

### P1 - 重要增强（第一阶段）
- US-1.3, US-1.5, US-1.6: 继承关系、关系特性、基数约束
- US-2.1: 预定义模板
- US-3.1: 导入外部OWL
- US-4.1, US-4.2, US-4.3: 多布局、树形视图、矩阵视图
- US-5.2, US-5.3, US-5.4: 批量操作、高级搜索、路径查找
- US-6.1, US-6.2: 多格式导入、增量导入
- US-7.1, US-7.2, US-7.3: 版本控制
- US-9.1, US-9.2, US-9.3: 推理引擎
- US-10.1, US-10.2: SPARQL查询
- US-11.1, US-11.2: 用户和权限
- US-16.1, US-16.2: 新手引导
- US-18.1, US-18.2: 性能优化

**总计**: 22个故事，约280小时

### P2 - 高级功能（第二阶段）
- 所有AI辅助功能（Epic 13, 14, 15）
- 实时协作功能（Epic 12）
- 个性化功能（Epic 17）
- 其他高级功能

**总计**: 约20个故事，约250小时

---

## 使用说明

1. **开发团队**: 每个Sprint选择若干用户故事进行开发
2. **产品经理**: 根据用户反馈调整优先级
3. **测试团队**: 使用验收标准进行测试
4. **文档团队**: 为每个功能编写用户手册

**最后更新**: 2026-01-16  
**版本**: v1.0
